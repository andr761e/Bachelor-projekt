diff_col = "DiffH", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = LGBM, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = LGBM, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = XGB, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = XGB, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = XGB, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = XGB, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = XGB, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = XGB, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = XGB, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = XGB, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = XGB, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = XGB, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = XGB, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TNN, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TNN, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TNN, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TNN, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TNN, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TNN, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TNN, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TNN, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TNN, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TNN, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TNN, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TNN, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TLR, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TLR, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TLR, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TLR, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TLR, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TLR, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TLR, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TLR, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TLR, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TLR, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TLR, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TLR, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TRF, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TRF, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TRF, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TRF, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TRF, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TRF, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TRF, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TRF, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TRF, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TRF, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TRF, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TRF, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TCB, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TCB, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TCB, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TCB, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TCB, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TCB, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TCB, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TCB, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TCB, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TCB, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TCB, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TCB, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TLGBM, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TLGBM, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TLGBM, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TLGBM, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TLGBM, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TLGBM, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TLGBM, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TLGBM, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TLGBM, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TLGBM, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TLGBM, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TLGBM, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TXGB, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TXGB, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TXGB, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.025, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TXGB, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TXGB, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TXGB, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.05, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TXGB, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TXGB, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TXGB, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.075, bet_amount = 100, simulations = 10000)
# üî• Hjemmesejr (H)
monte_carlo_simulation(df = TXGB, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# ü§ù Uafgjort (D)
monte_carlo_simulation(df = TXGB, result_char = "D",
pred_col = "YpredD", odds_col = "MaxDodds",
diff_col = "DiffD", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# üöå Udebanesejr (A)
monte_carlo_simulation(df = TXGB, result_char = "A",
pred_col = "YpredA", odds_col = "MaxAodds",
diff_col = "DiffA", result_col = "FTR",
threshold = 0.1, bet_amount = 100, simulations = 10000)
# Funktion til beregning af Kelly-stake
kelly_fraction <- function(p, b) {
f <- (b * p - (1 - p)) / b
return(max(f, 0))  # Ingen negative indsatser
}
# Opdateret Monte Carlo-simulering med bankroll og Kelly-staking
monte_carlo_simulation2 <- function(df, result_char, pred_col, odds_col, diff_col,
result_col, threshold = 0.025, initial_bank = 1000, simulations = 10000) {
# Filtrer kampene, hvor forskellen overstiger threshold
df <- df[df[[diff_col]] >= threshold, ]
# Hvis ingen kampe opfylder threshold, afslut
if (nrow(df) == 0) {
cat("\n Ingen kamp opfylder threshold =", threshold, "\n")
return(NULL)
}
# Vektor til at gemme profitten fra hver simulation
final_bankrolls <- numeric(simulations)
# For reproduc√©rbarhed
set.seed(42)
# Monte Carlo-simulering
for (i in 1:simulations) {
bankroll <- initial_bank
sampled_df <- df[sample(nrow(df), replace = TRUE), ]
for (j in 1:nrow(sampled_df)) {
p_model <- sampled_df[[pred_col]][j]
odds <- sampled_df[[odds_col]][j]
b <- odds - 1
# Beregn Kelly-stake (halv Kelly for risikostyring)
f_star <- kelly_fraction(p_model, b) * 0.05
# Beregn indsats som andel af nuv√¶rende bankroll (eller max 10%)
stake <- min(f_star * bankroll, 0.10 * bankroll)
# Resultat af kampen
if (sampled_df[[result_col]][j] == result_char) {
bankroll <- bankroll + stake * b  # Gevinst
} else {
bankroll <- bankroll - stake      # Tab
}
}
final_bankrolls[i] <- bankroll
}
# Beregn √¶ndring i profit (ift. startbankroll)
profits <- final_bankrolls - initial_bank
# Beregn empirisk og normalfordelingsbaseret 95%-nedre gr√¶nse (per kamp)
lower_95_empirical_total <- quantile(profits, 0.05)
n <- nrow(df)
lower_95_empirical_per_bet <- lower_95_empirical_total / n
mean_profit_total <- mean(profits)
mean_profit_per_bet <- mean_profit_total / n
sd_profit_per_bet <- sd(profits / n)
# Normalfordelingsbaseret nedre gr√¶nse (95% ensidet)
z_score <- 1.645  # 95% ensidet
lower_95_normal_per_bet <- mean_profit_per_bet - z_score * sd_profit_per_bet
# Plot histogram
hist(profits, breaks = 100, main = paste("Monte Carlo Simulation:", result_char, "med dynamisk Kelly staking"),
xlab = "Profit (DKK)", col = "gray", border = "black")
abline(v = lower_95_empirical_total, col = "red", lwd = 2, lty = 2)
# Output
cat("\n Resultat:", result_char, "\n")
cat("Threshold:", threshold, "\n")
cat("Antal kampe opfylder threshold:", n, "\n")
cat("Gennemsnitlig profit pr. simulation:", round(mean(profits), 2), "DKK\n")
cat("Median profit pr. simulation:", round(median(profits), 2), "DKK\n")
cat("Varians af profit pr. simulation:", round(var(profits), 2), "DKK¬≤\n")
cat("Andel af simulationer med overskud:", round(mean(profits > 0) * 100, 2), "%\n")
# Udskriv normalbaseret konfidensgr√¶nse
cat("\n--- Konfidensanalyse (Normalapproximation) ---\n")
cat("Gennemsnitlig profit per kamp:", round(mean_profit_per_bet, 2), "DKK\n")
cat("95% normalfordelingsbaseret nedre gr√¶nse per kamp:", round(lower_95_normal_per_bet, 2), "DKK\n")
# Udskriv empirisk nedre gr√¶nse
cat("\n--- 95% empirisk nedre gr√¶nse ---\n")
cat("95% empirisk nedre gr√¶nse (per kamp):", round(lower_95_empirical_per_bet, 2), "DKK\n")
cat("-------------------------------------------------------------------\n")
}
# TAU = 0.09
# üî• Hjemmesejr (H)
monte_carlo_simulation2(df = TLGBM, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.09, initial_bank = 5000, simulations = 10000)
# TAU = 0.09
# üî• Hjemmesejr (H)
monte_carlo_simulation2(df = TLGBM, result_char = "H",
pred_col = "YpredH", odds_col = "MaxHodds",
diff_col = "DiffH", result_col = "FTR",
threshold = 0.09, initial_bank = 10000, simulations = 10000)
